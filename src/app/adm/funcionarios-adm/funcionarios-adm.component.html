<div class="row mb-1">

    <div class="col">
        <div class="form-group">
            <div class="input-group box-shadow">
                <div class="input-group-addon border-top-0 border-left-0 border-bottom-0 rounded-0">
                    <i class="fa fa-search"></i>
                </div>
                <input type="text" [(ngModel)]="searchText" placeholder="Search user by name..." class="form-control border-0">
                <div (click)="openModal(modalContent, null)" class="input-group-addon border-top-0 border-right-0 border-bottom-0">
                    <i class="fa fa-user-plus"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="type=='grid'" class="row">
    <div *ngFor="let funcionario of funcionarios | FuncionarioSearchPipe : searchText | paginate: { itemsPerPage: 9, currentPage: p }; let i = index;"
        class="col-xl-4 col-lg-6 mb-4">
        <div class="flip">
            <div class="content">
                <div class="front">
                    <div class="card border-0 box-shadow rounded-0">
                        <div class="card-header border-0 rounded-0 text-muted h50">
                            <div class="widget-controls">
                                <ul class="card-action-buttons">
                                    <li>
                                        <a (click)="openModal(modalContent, user)" href="javascript:void(0);" class="btn-floating waves-effect waves-light cyan">
                                            <i class="fa fa-pencil"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a (click)="deleteUser(user)" href="javascript:void(0);" class="btn-floating waves-effect waves-light cyan">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </li>
                                </ul>

                            </div>
                        </div>
                        <div class="card-block pt-3">

                            <div class="media">
                                <div class="d-flex flex-column justify-content-center">
                                    <img class="rounded-circle img-funcionario" src="../../../assets/img/users/default-user.jpg" width="60">
                                </div>
                                <div class="media-body">
                     
                                        <h5 class="card-title activator grey-text text-darken-4 mt-4">
                                            {{funcionario.funcionario_nome}}&nbsp;{{funcionario.funcionario_sobrenome}}
                                        </h5>
                                        <p class="mt-0 mb-0">
                                                <strong>CFP:</strong>&nbsp;{{funcionario.funcionario_cpf}}
                                        </p>
                                        <p class="mt-0 mb-0">
                                                <strong>CARGO:</strong>&nbsp;{{funcionario.cargo_descricao}}
                                        </p>
                                        <p class="mt-0 mb-0">
                                                <strong>TELEFONE:</strong>&nbsp;({{funcionario.telefone_ddd}})&nbsp;{{funcionario.telefone_numero}}
                                        </p>
                                        <p class="mt-0 mb-0">
                                                <strong>EMAIL:</strong>&nbsp;{{funcionario.email_descricao}}
                                        </p>                             
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="bg-white text-center">
            <pagination-controls autoHide="true" (pageChange)="p = $event" maxSize="3"></pagination-controls>
        </div>
    </div>
</div>

<ng-template #modalContent>
    <div class="modal-body bg-gray">
        <div class="row">
            <div class="col-12 vertical-tabs">
                <form [formGroup]="form" (ngSubmit)="onSubmit(form.value)" class="row px-3">
                    <ul class="nav flex-column left col-3 border-0 rounded-0 mr-0 bg-light">
                        <img *ngIf="user.profile.image" class="w-100" [src]="user.profile.image">
                        <img *ngIf="!user.profile.image" class="w-100" src="assets/img/users/default-user.jpg">
                        <li class="nav-item bg-light">
                            <a class="nav-link active" href="#basic" data-toggle="tab">Basic</a>
                        </li>
                        <li class="nav-item bg-light">
                            <a class="nav-link" href="#personal" data-toggle="tab">Personal</a>
                        </li>
                        <li class="nav-item bg-light">
                            <a class="nav-link" href="#work" data-toggle="tab">Work</a>
                        </li>
                        <li class="nav-item bg-light">
                            <a class="nav-link" href="#contacts" data-toggle="tab">Contacts</a>
                        </li>
                        <li class="nav-item bg-light">
                            <a class="nav-link" href="#social" data-toggle="tab">Social life</a>
                        </li>
                        <li class="nav-item bg-light">
                            <a class="nav-link" href="#settings" data-toggle="tab">Settings</a>
                        </li>
                    </ul>
                    <div class="tab-content col-9 border-0">
                        <div class="tab-pane" id="personal" formGroupName="profile">
                            <div class="form-group">
                                <label class="text-gray">Nome</label>
                                <input formControlName="name" class="form-control" type="text">
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Sobrenome</label>
                                <input formControlName="surname" class="form-control" type="text">
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Cargo</label>
                                <input formControlName="surname" class="form-control" type="text">
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Birthday</label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="yyyy-mm-dd" name="dp" formControlName="birthday" ngbDatepicker #birthdayDp="ngbDatepicker">
                                    <div class="input-group-addon" (click)="birthdayDp.toggle()">
                                        <i class="fa fa-calendar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="text-gray mr-2">Gender</label>
                                <label *ngFor="let gender of genders" class="custom-control custom-radio">
                                    <input formControlName="gender" type="radio" class="custom-control-input radio-dark-gray" [checked]="gender === genderOption"
                                        [value]="gender">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description text-capitalize">
                                        <i class="fa fa-{{gender}}" aria-hidden="true"></i>
                                    </span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Image</label>
                                <input formControlName="image" class="form-control" type="text">
                            </div>
                        </div>
                        <div class="tab-pane" id="work" formGroupName="work">
                            <div class="form-group">
                                <label class="text-gray">Company</label>
                                <input formControlName="company" class="form-control" type="text">
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Position</label>
                                <input formControlName="position" class="form-control" type="text">
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Salary</label>
                                <div class="input-group">
                                    <div class="input-group-addon">$</div>
                                    <input formControlName="salary" class="form-control" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="contacts" formGroupName="contacts">
                            <div class="form-group">
                                <label class="text-gray">Email</label>
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-envelope-o"></i>
                                    </div>
                                    <input formControlName="email" class="form-control" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Phone</label>
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-phone"></i>
                                    </div>
                                    <input formControlName="phone" class="form-control" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Address</label>
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-map-marker"></i>
                                    </div>
                                    <input formControlName="address" class="form-control" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="social" formGroupName="social">
                            <div class="form-group">
                                <label class="text-gray">Facebook</label>
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-facebook"></i>
                                    </div>
                                    <input formControlName="facebook" class="form-control" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Twitter</label>
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-twitter"></i>
                                    </div>
                                    <input formControlName="twitter" class="form-control" type="text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="text-gray">Google</label>
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-google"></i>
                                    </div>
                                    <input formControlName="google" class="form-control" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="settings" formGroupName="settings">
                            <div class="custom-controls-stacked">
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input checkbox-dark-gray" formControlName="isActive" [value]="isActive" />
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Active</span>
                                </label>
                                <label class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input checkbox-dark-gray" formControlName="isDeleted" [value]="isDeleted" />
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Deleted</span>
                                </label>
                            </div>
                            <label *ngIf="user.id">
                                <span class="text-gray">Registration date:</span>
                                <i>{{user.settings.registrationDate | date:"dd MMMM, yyyy 'at' HH:mm" }}</i>
                            </label>
                            <label *ngIf="user.id">
                                <span class="text-gray">Last joined date:</span>
                                <i>{{user.settings.joinedDate | date:"dd MMMM, yyyy 'at' HH:mm" }}</i>
                            </label>
                        </div>
                    </div>
                    <div class="col-12 bg-white text-center py-1">
                        <button [disabled]="!form.valid" class="btn btn-success" type="submit">
                            <span *ngIf="!user.id">Add</span>
                            <span *ngIf="user.id">Update</span>
                        </button>
                        <button type="button" class="btn btn-danger" (click)="closeModal()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</ng-template>